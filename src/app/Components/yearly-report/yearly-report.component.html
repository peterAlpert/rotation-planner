<div class="container mt-4" dir="rtl">
    <div class="card shadow">
        <div class="card-body">
            <div class="d-flex align-items-center gap-2 mb-3 flex-wrap">
                <h3 class="fw-bold mb-0">๐ ุชูุฑูุฑ ุชูุฒูุน ุงููุดุฑููู ูุงูููุชุฑูู - ุงูุณูุฉ</h3>

                <div class="ms-auto d-flex align-items-center gap-2">
                    <label class="form-label mb-0">ุงูุณูุฉ:</label>
                    <input type="number" class="form-control form-control-sm w-auto" [(ngModel)]="year" />
                    <button class="btn btn-sm btn-secondary" (click)="load()">ุชุญุฏูุซ</button>
                    <button class="btn btn-sm btn-success" (click)="exportToExcel()">ุชุตุฏูุฑ Excel</button>
                </div>
            </div>

            <div *ngIf="loading()" class="alert alert-info text-center">ุฌุงุฑู ุงูุชุญููู...</div>
            <div *ngIf="errorMsg()" class="alert alert-danger text-center">{{ errorMsg() }}</div>

            <div class="table-responsive">
                <table class="table table-bordered table-hover text-center align-middle">
                    <thead class="table-dark">
                        <tr>
                            <th>ุงูุงุณู</th>
                            <th>ุงููุธููุฉ</th>
                            <th>ุตุจุงุญู</th>
                            <th>ุงูููุงุนุจ</th>
                            <th>ุงูุฌุงุฑุฏู</th>
                            <th>ุงูุจุญูุฑุฉ</th>
                            <th>ุงูุฅุฌูุงูู</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr *ngFor="let r of data()">
                            <td class="text-nowrap">{{ r.name }}</td>
                            <td>{{ r.role }}</td>
                            <td>{{ r.morningCount }}</td>
                            <td>{{ r.stadiumCount }}</td>
                            <td>{{ r.gardenCount }}</td>
                            <td>{{ r.lakeCount }}</td>
                            <td>{{ r.morningCount + r.stadiumCount + r.gardenCount + r.lakeCount }}</td>
                        </tr>
                    </tbody>

                    <tfoot>
                        <tr class="table-secondary fw-bold">
                            <td>ุงูุฅุฌูุงูู</td>
                            <td></td>
                            <td>{{ totals().morning }}</td>
                            <td>{{ totals().stadium }}</td>
                            <td>{{ totals().garden }}</td>
                            <td>{{ totals().lake }}</td>
                            <td>{{ totals().all }}</td>
                        </tr>
                    </tfoot>
                </table>
            </div>

        </div>
    </div>
</div>