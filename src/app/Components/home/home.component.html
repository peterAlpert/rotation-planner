<div class="row m-3 p-3" dir="rtl">
    <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙŠÙ…ÙŠÙ†: Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ† + Ø§Ù„ÙƒÙ†ØªØ±ÙˆÙ„ -->
    <div class="col-3">
        <h4 class="text-center">ğŸ‘¨â€ğŸ’¼ Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†</h4>
        <div cdkDropList id="supervisors" [cdkDropListData]="supervisors"
            [cdkDropListConnectedTo]="connectedSupervisorLists" (cdkDropListDropped)="drop($event)" class="list">
            <div class="row">
                <div class="col-6" *ngFor="let sup of supervisors" cdkDrag>
                    <div class="item supervisor text-center">{{ sup.name }}</div>
                </div>
            </div>
        </div>

        <h4 class="text-center mt-4">ğŸ¯ Ø§Ù„ÙƒÙ†ØªØ±ÙˆÙ„</h4>
        <div cdkDropList id="controllers" [cdkDropListData]="controllers"
            [cdkDropListConnectedTo]="connectedControllerLists" (cdkDropListDropped)="drop($event)" class="list">
            <div class="row">
                <div class="col-6" *ngFor="let ctrl of controllers" cdkDrag>
                    <div class="item controller text-center">{{ ctrl.name }}</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø´Ù…Ø§Ù„: Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ -->
    <div class="col-9">
        <div class="row">
            <ng-container *ngFor="let area of areas">
                <!-- Ù„Ùˆ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø´ÙŠÙØª ØµØ¨Ø§Ø­ÙŠ -->
                <!-- Ù„Ùˆ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø´ÙŠÙØª ØµØ¨Ø§Ø­ÙŠ -->
                <div class="col-md-6 mb-4" *ngIf="area.name === 'Ø´ÙŠÙØª ØµØ¨Ø§Ø­ÙŠ'">
                    <div class="area-card p-3" [style.borderColor]="area.color">
                        <div class="row">
                            <!-- ØµØ¨Ø§Ø­ÙŠ -->
                            <div class="col-6 p-1" cdkDropList [id]="area.name + '-right-sup'"
                                [cdkDropListData]="area.subAreas[0].controllers"
                                [cdkDropListConnectedTo]="connectedControllerLists" (cdkDropListDropped)="drop($event)">
                                <h1 class="fw-bold text-center mb-2 text-light">{{ area.subAreas[0].name }}</h1>
                                <h4 class="fw-bold text-center mb-2" [style.color]="area.color">
                                    ğŸ‘¨â€ğŸ’¼ <span *ngIf="area.supervisors.length">{{ area.supervisors[0].name }}</span>
                                    <span *ngIf="!area.supervisors.length">Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø±Ù</span>
                                </h4>
                                <h6 class="text-light text-center mt-2">ğŸ¯ Ø§Ù„ÙƒÙ†ØªØ±ÙˆÙ„ ({{
                                    area.subAreas[0].controllers.length }})</h6>
                                <div class="list">
                                    <div class="row">
                                        <div class="col-6 mb-2" *ngFor="let ctrl of area.subAreas[0].controllers"
                                            cdkDrag>
                                            <div class="item controller text-center">{{ ctrl.name }}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ØªÙˆÙŠÙ† -->
                            <div class="col-6 p-1" cdkDropList [id]="area.name + '-left-sup'"
                                [cdkDropListData]="area.subAreas[1].controllers"
                                [cdkDropListConnectedTo]="connectedControllerLists" (cdkDropListDropped)="drop($event)">
                                <h1 class="fw-bold text-center mb-2 text-light">{{ area.subAreas[1].name }}</h1>
                                <h4 class="fw-bold text-center mb-2" [style.color]="area.color">
                                    ğŸ‘¨â€ğŸ’¼ <span *ngIf="area.supervisors.length">{{ area.supervisors[0].name }}</span>
                                    <span *ngIf="!area.supervisors.length">Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø±Ù</span>
                                </h4>
                                <h6 class="text-light text-center mt-2">ğŸ¯ Ø§Ù„ÙƒÙ†ØªØ±ÙˆÙ„ ({{
                                    area.subAreas[1].controllers.length }})</h6>
                                <div class="list">
                                    <div class="row">
                                        <div class="col-6 mb-2" *ngFor="let ctrl of area.subAreas[1].controllers"
                                            cdkDrag>
                                            <div class="item controller text-center">{{ ctrl.name }}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>



                <!-- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ -->
                <div class="col-md-6 mb-4" *ngIf="area.name !== 'Ø´ÙŠÙØª ØµØ¨Ø§Ø­ÙŠ'">
                    <div class="area-card p-3" [style.borderColor]="area.color" cdkDropList [id]="area.name + '-sup'"
                        [cdkDropListData]="area.supervisors" [cdkDropListConnectedTo]="connectedSupervisorLists"
                        (cdkDropListDropped)="drop($event)" class="list"
                        [class.drop-hover]="area.supervisors.length < 1">
                        <h1 class="fw-bold text-center mb-3 text-light">{{area.name}}</h1>
                        <h4 class="fw-bold text-center mb-3" [style.color]="area.color">
                            ğŸ‘¨â€ğŸ’¼
                            <span *ngIf="area.supervisors.length" class="fs-1">{{ area.supervisors[0].name }}</span>
                            <span *ngIf="area.supervisors.length === 0">Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø±Ù</span>
                        </h4>
                        <h6 class="text-light text-center mt-3">ğŸ¯ Ø§Ù„ÙƒÙ†ØªØ±ÙˆÙ„ ({{area.controllers.length}})</h6>
                        <div cdkDropList [id]="area.name + '-ctrl'" [cdkDropListData]="area.controllers"
                            [cdkDropListConnectedTo]="connectedControllerLists" (cdkDropListDropped)="drop($event)"
                            class="list">
                            <div class="row">
                                <div class="col-6 col-md-6 mb-2" *ngFor="let ctrl of area.controllers" cdkDrag>
                                    <div class="item controller text-center">{{ ctrl.name }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>
        </div>
    </div>

    <div class="fixed-buttons text-center">
        <button class="btn btn-success" (click)="saveDistribution()">ğŸ’¾ Ø­ÙØ¸</button>
        <button class="btn btn-info" (click)="loadDistribution()">ğŸ“‚ ØªØ­Ù…ÙŠÙ„</button>
        <button class="btn btn-warning" (click)="resetDistribution()">â™»ï¸ Ø¥Ø¹Ø§Ø¯Ø©</button>
        <button class="btn btn-success" (click)="exportToWord()">ğŸ“¥ ØªØµØ¯ÙŠØ± Word</button>
    </div>
</div>